(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,n){e.exports=n(67)},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),c=n.n(i),s=n(9),o=n(10),l=n(31),u=n(8),d="FETCH_CITY",m="SET_LOADING",p="SET_ERROR",h="SET_ACTIVE_CITY",f="DELETE_CITY",y=n(12),b=n(19),O=13,v=new Promise(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){return e(t.coords)},function(e){return t(new Error(e.message))}):t(new Error("Browser does't support geolocation"))}),E=function(e,t){localStorage.setItem(e,JSON.stringify(t))},j=function(e){var t=localStorage.getItem(e);return null!==t?function(e){try{return JSON.parse(e)}catch(t){return console.error('Error parce data! Method: "tryParce"',t),null}}(t):null},w=function(e){var t=j("cityList"),n=e.id+e.name;t=null===t?Object(y.a)({},n,e):Object(u.a)({},t,Object(y.a)({},n,e)),E("cityList",t)},g=function(e){var t=j("cityList");null!==t&&delete t[e],E("cityList",t)},C=function(){var e=j("cityList");return null!==e?new b.a(e):new b.a}(),N=C.size>0?C.first().id+C.first().name:null,L={cityList:C,selectedCity:N,isLoading:!1,error:null};var k=Object(o.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:var n=t.city,a=n.id+n.name;return w(n),Object(u.a)({},e,{error:null,cityList:e.cityList.set(a,n),selectedCity:a});case m:return Object(u.a)({},e,{isLoading:t.isLoading});case p:return Object(u.a)({},e,{error:t.error});case h:return Object(u.a)({},e,{error:null,selectedCity:t.id+t.name});case f:var r=t.id;g(r);var i=e.cityList.delete(r),c=null;return 0!==i.size&&(c=e.selectedCity===r?i.first().id+i.first().name:e.selectedCity),Object(u.a)({},e,{cityList:i,selectedCity:c});default:return e}}}),S=function(e){var t=Object(o.d)(Object(o.a)(l.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());return Object(o.e)(k,e,t)}(),I=n(1),P=n(2),_=n(5),D=n(3),T=n(4),R=n(32),A=n.n(R).a.create({baseURL:"https://api.openweathermap.org",params:{APPID:"1c367c315e828bd9be4d2087067285f1",lang:"en",units:"metric"}}),x=function(e){return{type:d,city:e}},J=function(e){return{type:m,isLoading:e}},X=function(e){return{type:p,error:e}};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={params:Object(u.a)({},A.defaults.params)};"string"===typeof e?t.params.q=e:t.params=Object(u.a)({},e,t.params);var n=A.get("/data/2.5/weather",t);return S.dispatch(J(!0)),n.then(function(e){200===e.status&&S.dispatch(x(e.data)),S.dispatch(J(!1))}).catch(function(e){S.dispatch(X("Something wrong! Try again.")),S.dispatch(J(!1))}),n}n(59);var B=function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cld-container"},r.a.createElement("div",{className:"cld-circle"}),r.a.createElement("div",{className:"cld-main"}),r.a.createElement("h2",{className:"title"},"Weather"),r.a.createElement("h2",{className:"title-desc"},"Now"))}}]),t}(a.PureComponent),F=n(7),M=n(15),U=n.n(M),V=(n(60),function(e){function t(e){var n;return Object(I.a)(this,t),(n=Object(_.a)(this,Object(D.a)(t).call(this,e))).state={isShowInput:!1,isError:!1,isLoading:!1},n.showInput=n.showInput.bind(Object(F.a)(n)),n.keyPress=n.keyPress.bind(Object(F.a)(n)),n}return Object(T.a)(t,e),Object(P.a)(t,[{key:"showInput",value:function(e){var t=this;return function(){return t.setState({isShowInput:e})}}},{key:"keyPress",value:function(e){var t=this,n=e.target.value;""!==n&&e.charCode===O&&(this.setState({isLoading:!0}),z(n).then(function(e){t.setState({isShowInput:!1,isError:!1,isLoading:!1})}).catch(function(e){t.setState({isError:!0,isLoading:!1})}))}},{key:"render",value:function(){var e,t=this.state,n=t.isShowInput,a=t.isError,i=t.isLoading;return e=n?r.a.createElement("input",{type:"text",className:U()("add-city-input",{"add-city-input-error":a}),autoFocus:!0,disabled:i,placeholder:" Search...",onKeyPress:this.keyPress,onBlur:this.showInput(!1)}):r.a.createElement("button",{className:"btn-add-city",onClick:this.showInput(!0)},"+ Add city"),r.a.createElement("div",{className:"add-city-container"},e)}}]),t}(a.PureComponent)),Y=(n(61),function(e){function t(e){var n;return Object(I.a)(this,t),(n=Object(_.a)(this,Object(D.a)(t).call(this,e))).onClickDelete=n.onClickDelete.bind(Object(F.a)(n)),n}return Object(T.a)(t,e),Object(P.a)(t,[{key:"onClickDelete",value:function(e){var t=this.props.onDelete;e.stopPropagation(),t()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isActive;return r.a.createElement("div",{className:U()("city-item",{"city-item-active":n})},r.a.createElement("p",{className:"city-name"},t.name),r.a.createElement("p",{className:"close",onClick:this.onClickDelete},"\u2716"))}}]),t}(a.PureComponent));Y.defaultProps={data:null,onDelete:function(){},isActive:!1};n(62);var q=function(e){function t(e){var n;return Object(I.a)(this,t),(n=Object(_.a)(this,Object(D.a)(t).call(this,e))).selectCity=n.selectCity.bind(Object(F.a)(n)),n}return Object(T.a)(t,e),Object(P.a)(t,[{key:"selectCity",value:function(e){return function(){return S.dispatch(function(e){return{type:h,id:e}}(e))}}},{key:"deleteCity",value:function(e){return function(){return S.dispatch(function(e){return{type:f,id:e}}(e))}}},{key:"render",value:function(){var e=this.props.state.weatherReducer,t=e.cityList,n=e.selectedCity,a=[],i=!0,c=!1,s=void 0;try{for(var o,l=t.entries()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;a.push(r.a.createElement("li",{key:u[0],className:"city-list-item",onClick:this.selectCity(u[0])},r.a.createElement(Y,{data:u[1],isActive:n===u[0],onDelete:this.deleteCity(u[0])})))}}catch(d){c=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}return r.a.createElement("div",{className:"city-list-wrapper"},r.a.createElement("ul",{className:"city-list"},a),r.a.createElement(V,null))}}]),t}(a.PureComponent),G=Object(s.b)(function(e){return{state:e}})(q),H=(n(63),function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(B,null),r.a.createElement("p",null,"List of cities:"),r.a.createElement(G,null))}}]),t}(a.PureComponent)),K=(n(64),function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){var e,t=this.props.state.weatherReducer,n=t.selectedCity,a=t.isLoading,i=t.error,c=t.cityList;if(a)e=r.a.createElement("p",null,"Loading");else if(null!==i)e=r.a.createElement("h2",null,i);else if(0!==c.size){var s=c.get(n),o="http://openweathermap.org/img/w/".concat(s.weather[0].icon,".png");e=r.a.createElement("div",null,r.a.createElement("img",{className:"img",src:o,alt:"weather-icon"}),r.a.createElement("h3",{className:"city"},s.name),r.a.createElement("h1",{className:"temp"},s.main.temp.toFixed(1)+"\xb0"),r.a.createElement("p",{className:"description"},s.weather[0].main),r.a.createElement("p",{className:"sub-description"},s.weather[0].description))}else e=r.a.createElement("h2",null,"Empty");return r.a.createElement("div",{className:"weather-container"},e)}}]),t}(a.PureComponent)),W=Object(s.b)(function(e){return{state:e}})(K),Q=(n(65),function(e){function t(){return Object(I.a)(this,t),Object(_.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(P.a)(t,[{key:"componentDidMount",value:function(){v.then(function(e){z({lat:e.latitude,lon:e.longitude})}).catch(function(e){z("Moscow")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(H,null),r.a.createElement(W,null))}}]),t}(a.Component)),Z=Object(s.b)(function(e){return{state:e}})(Q);n(66);c.a.render(r.a.createElement(s.a,{store:S},r.a.createElement(Z,null)),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.a48d7ba0.chunk.js.map