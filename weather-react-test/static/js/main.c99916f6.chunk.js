(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,n){e.exports=n(66)},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(13),c=n.n(i),s=n(9),o=n(10),l=n(29),u=n(8),d=n(30),m="FETCH_CITY",p="SET_LOADING",h="SET_ERROR",f="SET_ACTIVE_CITY",y="DELETE_CITY",b=new Promise(function(e,t){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){return e(t.coords)},function(e){return t(new Error(e.message))}):t(new Error("Browser does't support geolocation"))}),v=function(e,t){localStorage.setItem(e,JSON.stringify(t))},O={cityList:new d.a,selectedCity:null,isLoading:!1,error:null};var j=Object(o.c)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:var n=t.city;return v(n.id,n),Object(u.a)({},e,{error:null,cityList:e.cityList.set(n.id,n)});case p:return Object(u.a)({},e,{isLoading:t.isLoading});case h:return Object(u.a)({},e,{error:t.error});case f:return Object(u.a)({},e,{error:null,selectedCity:t.id});case y:var a=t.id,r=e.cityList.delete(a),i=e.selectedCity===a?e.cityList.first().id:e.selectedCity;return Object(u.a)({},e,{cityList:r,selectedCity:i});default:return e}}}),E=function(e){var t=Object(o.d)(Object(o.a)(l.a));return Object(o.e)(j,e,t)}(),g=n(1),w=n(2),C=n(5),k=n(3),N=n(4),L=n(31),I=13,P=n.n(L).a.create({baseURL:"https://api.openweathermap.org",params:{APPID:"1c367c315e828bd9be4d2087067285f1",lang:"en",units:"metric"}}),S=function(e){return{type:m,city:e}},D=function(e){return{type:p,isLoading:e}},T=function(e){return{type:h,error:e}},A=function(e){return{type:f,id:e}};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={params:Object(u.a)({},P.defaults.params)};"string"===typeof e?t.params.q=e:t.params=Object(u.a)({},e,t.params);var n=P.get("/data/2.5/weather",t);return E.dispatch(D(!0)),n.then(function(e){200===e.status&&(E.dispatch(S(e.data)),E.dispatch(A(e.data.id))),E.dispatch(D(!1))}).catch(function(e){E.dispatch(T("Something wrong! Try again.")),E.dispatch(D(!1))}),n}n(58);var _=function(e){function t(){return Object(g.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"cld-container"},r.a.createElement("div",{className:"cld-circle"}),r.a.createElement("div",{className:"cld-main"}),r.a.createElement("h2",{className:"title"},"Weather"),r.a.createElement("h2",{className:"title-desc"},"Now"))}}]),t}(a.PureComponent),x=n(7),B=n(14),F=n.n(B),J=(n(59),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(C.a)(this,Object(k.a)(t).call(this,e))).state={isShowInput:!1,isError:!1,isLoading:!1},n.showInput=n.showInput.bind(Object(x.a)(n)),n.keyPress=n.keyPress.bind(Object(x.a)(n)),n}return Object(N.a)(t,e),Object(w.a)(t,[{key:"showInput",value:function(e){var t=this;return function(){return t.setState({isShowInput:e})}}},{key:"keyPress",value:function(e){var t=this,n=e.target.value;""!==n&&e.charCode===I&&(this.setState({isLoading:!0}),R(n).then(function(e){t.setState({isShowInput:!1,isError:!1,isLoading:!1})}).catch(function(e){t.setState({isError:!0,isLoading:!1})}))}},{key:"render",value:function(){var e,t=this.state,n=t.isShowInput,a=t.isError,i=t.isLoading;return e=n?r.a.createElement("input",{type:"text",className:F()("add-city-input",{"add-city-input-error":a}),autoFocus:!0,disabled:i,placeholder:" Search...",onKeyPress:this.keyPress,onBlur:this.showInput(!1)}):r.a.createElement("button",{className:"btn-add-city",onClick:this.showInput(!0)},"+ Add city"),r.a.createElement("div",{className:"add-city-container"},e)}}]),t}(a.PureComponent)),Y=(n(60),function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(C.a)(this,Object(k.a)(t).call(this,e))).onClickDelete=n.onClickDelete.bind(Object(x.a)(n)),n}return Object(N.a)(t,e),Object(w.a)(t,[{key:"onClickDelete",value:function(e){var t=this.props.onDelete;e.stopPropagation(),t()}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.isActive;return r.a.createElement("div",{className:F()("city-item",{"city-item-active":n})},r.a.createElement("p",{className:"city-name"},t.name),r.a.createElement("p",{className:"close",onClick:this.onClickDelete},"\u2716"))}}]),t}(a.PureComponent));Y.defaultProps={data:null,onDelete:function(){},isActive:!1};n(61);var M=function(e){function t(e){var n;return Object(g.a)(this,t),(n=Object(C.a)(this,Object(k.a)(t).call(this,e))).selectCity=n.selectCity.bind(Object(x.a)(n)),n}return Object(N.a)(t,e),Object(w.a)(t,[{key:"selectCity",value:function(e){return function(){return E.dispatch(A(e))}}},{key:"deleteCity",value:function(e){return function(){return E.dispatch(function(e){return{type:y,id:e}}(e))}}},{key:"render",value:function(){var e=this.props.state.weatherReducer,t=e.cityList,n=e.selectedCity,a=[],i=!0,c=!1,s=void 0;try{for(var o,l=t.entries()[Symbol.iterator]();!(i=(o=l.next()).done);i=!0){var u=o.value;a.push(r.a.createElement("li",{key:u[0],className:"city-list-item",onClick:this.selectCity(u[0])},r.a.createElement(Y,{data:u[1],isActive:n===u[0],onDelete:this.deleteCity(u[0])})))}}catch(d){c=!0,s=d}finally{try{i||null==l.return||l.return()}finally{if(c)throw s}}return r.a.createElement("div",{className:"city-list-wrapper"},r.a.createElement("ul",{className:"city-list"},a),r.a.createElement(J,null))}}]),t}(a.PureComponent),q=Object(s.b)(function(e){return{state:e}})(M),z=(n(62),function(e){function t(){return Object(g.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"sidebar-container"},r.a.createElement(_,null),r.a.createElement("p",null,"List of cities:"),r.a.createElement(q,null))}}]),t}(a.PureComponent)),G=(n(63),function(e){function t(){return Object(g.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"render",value:function(){var e,t=this.props.state.weatherReducer,n=t.selectedCity,a=t.isLoading,i=t.error,c=t.cityList;if(a)e=r.a.createElement("p",null,"Loading");else if(null!==i)e=r.a.createElement("h2",null,i);else if(0!==c.size){var s=c.get(n),o="http://openweathermap.org/img/w/".concat(s.weather[0].icon,".png");e=r.a.createElement("div",null,r.a.createElement("img",{className:"img",src:o,alt:"weather-icon"}),r.a.createElement("h3",{className:"city"},s.name),r.a.createElement("h1",{className:"temp"},s.main.temp.toFixed(1)+"\xb0"),r.a.createElement("p",{className:"description"},s.weather[0].main),r.a.createElement("p",{className:"sub-description"},s.weather[0].description))}else e=r.a.createElement("h2",null,"Empty");return r.a.createElement("div",{className:"weather-container"},e)}}]),t}(a.PureComponent)),H=Object(s.b)(function(e){return{state:e}})(G),K=(n(64),function(e){function t(){return Object(g.a)(this,t),Object(C.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(N.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){b.then(function(e){R({lat:e.latitude,lon:e.longitude})}).catch(function(e){R("Moscow")})}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(z,null),r.a.createElement(H,null))}}]),t}(a.Component)),U=Object(s.b)(function(e){return{state:e}})(K);n(65);c.a.render(r.a.createElement(s.a,{store:E},r.a.createElement(U,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.c99916f6.chunk.js.map