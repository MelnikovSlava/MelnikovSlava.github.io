(function(t){function e(e){for(var i,s,a=e[0],o=e[1],u=e[2],d=0,f=[];d<a.length;d++)s=a[d],r[s]&&f.push(r[s][0]),r[s]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);l&&l(e);while(f.length)f.shift()();return c.push.apply(c,u||[]),n()}function n(){for(var t,e=0;e<c.length;e++){for(var n=c[e],i=!0,a=1;a<n.length;a++){var o=n[a];0!==r[o]&&(i=!1)}i&&(c.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},r={app:0},c=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],o=a.push.bind(a);a.push=e,a=a.slice();for(var u=0;u<a.length;u++)e(a[u]);var l=o;c.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1d0b":function(t,e,n){"use strict";var i=n("4889"),r=n.n(i);r.a},2790:function(t,e,n){"use strict";var i=n("c37e"),r=n.n(i);r.a},4889:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var i=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("Sidebar"),n("WeatherMain")],1)},c=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sidebar"},[n("Cloud"),n("p",[t._v("List of cities:")]),n("CityList")],1)},a=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"city-list-wrapper"},[n("ul",{staticClass:"city-list"},[n("transition-group",{staticClass:"tr-list",attrs:{name:"list",tag:"p"}},t._l(t.cityList,function(e){return n("li",{key:e.id,staticClass:"city-list-item",on:{click:function(n){return t.setActiveCity(e.id)}}},[n("CityItem",{attrs:{city:e,isActive:t.checkIsActive(e.id),deleteItem:t.deleteItem(e.id)}})],1)}),0)],1),n("AddItem")],1)},u=[],l=n("cebc"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[{"city-item-active":t.isActive},"city-item"]},[n("p",{staticClass:"city-name"},[t._v(t._s(t.city.data.name))]),n("p",{staticClass:"close",on:{click:function(e){return e.stopPropagation(),t.deleteItem(e)}}},[t._v("✖")])])},f=[],p={props:{city:Object,isActive:Boolean,deleteItem:Function}},m=p,h=(n("d0b4"),n("2877")),v=Object(h["a"])(m,d,f,!1,null,"584df8d3",null),y=v.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"add-city"},[t.isShowInput?n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"input",staticClass:"add-city-input",attrs:{type:"text",disabled:t.isLoading},domProps:{value:t.message},on:{blur:function(e){return t.showInput(!1)},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.sendMsg(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}}):n("button",{staticClass:"btn-add-city",on:{click:function(e){return t.showInput(!0)}}},[t._v("+ Add city")])])},C=[],b=n("2f62"),_={data:function(){return{message:"",isShowInput:!1,isLoading:!1,error:!1}},methods:{showInput:function(t){var e=this;this.isShowInput=t,t&&setTimeout(function(){return e.$refs.input.focus()},0)},sendMsg:function(t){var e=this,n=t.target.value;""!==n?this.$store.dispatch("fetchCityWeather",n).then(function(t){e.isShowInput=!1,e.message=""}).catch(function(t){e.message="",alert("Not found!")}):alert("Input city!")}}},w=_,L=(n("a401"),Object(h["a"])(w,g,C,!1,null,"0cd75390",null)),I=L.exports,O={components:{CityItem:y,AddItem:I},computed:Object(l["a"])({},Object(b["b"])({cityList:function(t){return t.cityList},currentCity:function(t){return t.currentCity}})),methods:{setActiveCity:function(t){this.$store.commit("setActiveCity",t)},checkIsActive:function(t){return t===this.currentCity},deleteItem:function(t){var e=this;return function(){return e.$store.commit("deleteCity",t)}}}},x=O,j=(n("2790"),Object(h["a"])(x,o,u,!1,null,"27fd3a44",null)),S=j.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},$=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cld-container"},[n("div",{staticClass:"cld-circle"}),n("div",{staticClass:"cld-main"}),n("h2",{staticClass:"title"},[t._v("Weather")]),n("h2",{staticClass:"title-desc"},[t._v("Now")])])}],k={name:"Cloud"},E=k,P=(n("65a1"),Object(h["a"])(E,A,$,!1,null,"269d3660",null)),M=P.exports,W={name:"Sidebar",components:{CityList:S,Cloud:M}},T=W,N=(n("9763"),Object(h["a"])(T,s,a,!1,null,"3788f051",null)),V=N.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"weather-main"},[t.currentCity?n("div",[n("img",{staticClass:"img",attrs:{src:t.sourceImg}}),n("h3",{staticClass:"city"},[t._v(t._s(t.currentCity.data.name))]),n("h1",{staticClass:"temp"},[t._v(t._s(t.temp))]),n("p",{staticClass:"description"},[t._v(t._s(t.currentCity.data.weather[0].main))]),n("p",{staticClass:"sub-description"},[t._v(t._s(t.currentCity.data.weather[0].description))])]):n("div",[n("VueLoading",{attrs:{type:"spin",color:"lightgray",size:{width:"80px",height:"80px"}}})],1)])},F=[],J=(n("7514"),n("d523")),q={components:{VueLoading:J["VueLoading"]},computed:Object(l["a"])({temp:function(){return this.currentCity.data.main.temp.toFixed(1)+"°"},sourceImg:function(){return"http://openweathermap.org/img/w/".concat(this.currentCity.data.weather[0].icon,".png")}},Object(b["b"])({cityList:function(t){return t.cityList},currentCity:function(t){return t.cityList.find(function(e){return e.id===t.currentCity})}}))},z=q,D=(n("1d0b"),Object(h["a"])(z,B,F,!1,null,"35ed1477",null)),R=D.exports,U=new Promise(function(t,e){navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){return t(e.coords)},function(t){return e(new Error(t.message))}):e(new Error("Browser does't support geolocation"))}),G={components:{Sidebar:V,WeatherMain:R},mounted:function(){var t=this;U.then(function(e){t.$store.dispatch("fetchCityWeather",{lat:e.latitude,lon:e.longitude})}).catch(function(e){t.$store.dispatch("fetchCityWeather","Moscow"),console.error(e)})}},H=G,K=(n("7c55"),Object(h["a"])(H,r,c,!1,null,null,null)),Q=K.exports,X=(n("6b54"),n("20d6"),n("bc3a")),Y=n.n(X),Z=(n("94db"),"https://api.openweathermap.org"),tt="1c367c315e828bd9be4d2087067285f1";var et=Y.a.create({baseURL:Z,timeout:5e3,params:{APPID:tt,lang:"en",units:"metric"}});i["default"].use(b["a"]);var nt=new b["a"].Store({strict:!1,state:{cityList:[],currentCity:null,isLoading:!1,error:null},mutations:{fetchSuccess:function(t,e){var n=t.cityList.findIndex(function(t){return t.id===e.id});-1===n&&t.cityList.push({id:e.id,data:e})},deleteCity:function(t,e){var n=t.cityList.findIndex(function(t){return t.id===e});t.currentCity===e&&this.commit("setActiveCity",t.cityList[0].id),t.cityList.splice(n,1)},setActiveCity:function(t,e){t.currentCity=e},setLoading:function(t,e){t.isLoading=e},setError:function(t,e){t.error=e}},actions:{fetchCityWeather:function(t){var e=t.commit,n=t.state,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r={params:{}};"string"===typeof i?r.params.q=i:r.params=i;var c=et.get("/data/2.5/weather",r);return e("setLoading",!0),c.then(function(t){200===t.status&&(e("fetchSuccess",t.data),e("setActiveCity",t.data.id),null!==n.error&&e("setError",null)),e("setLoading",!1)}).catch(function(t){e("setError",t.toString()),e("setLoading",!1)}),c}}});i["default"].config.productionTip=!1,new i["default"]({store:nt,render:function(t){return t(Q)}}).$mount("#app")},"5c48":function(t,e,n){},"65a1":function(t,e,n){"use strict";var i=n("e89f"),r=n.n(i);r.a},"7c55":function(t,e,n){"use strict";var i=n("5c48"),r=n.n(i);r.a},"8a0f":function(t,e,n){},9763:function(t,e,n){"use strict";var i=n("8a0f"),r=n.n(i);r.a},a401:function(t,e,n){"use strict";var i=n("be22"),r=n.n(i);r.a},be22:function(t,e,n){},c37e:function(t,e,n){},cf2d:function(t,e,n){},d0b4:function(t,e,n){"use strict";var i=n("cf2d"),r=n.n(i);r.a},e89f:function(t,e,n){}});
//# sourceMappingURL=app.71c63ba8.js.map